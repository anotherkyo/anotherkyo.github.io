<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>카오스 제로 나이트메어 - 세이브 시뮬레이터 v4</title>
<style>
/* 스타일 전체 */
:root{--bg:#121212;--panel:#1a1a1a;--text:#e0e0e0;--highlight:#5cc9f5;--accent:#9b59b6;--danger:#ff4d4d;--success:#27e08a;}
body{margin:0;font-family:Inter,system-ui,sans-serif;background:var(--bg);color:var(--text)}
.wrap{max-width:1200px;margin:20px auto;padding:20px;background:var(--panel);border-radius:12px;}
h1{margin:0 0 12px;color:var(--highlight)}
p.lead{margin:0 0 16px;color:#aaa}
.grid{display:grid;grid-template-columns:2fr 1fr;gap:18px}
.panel{background:#1f1f1f;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.05)}
label{font-size:12px;color:#aaa;margin-bottom:4px;display:block}
input, select{width:100%;padding:6px 8px;border-radius:6px;border:1px solid rgba(255,255,255,0.1);background:transparent;color:var(--text)}
.btn{padding:6px 12px;border-radius:6px;border:none;cursor:pointer;background:var(--highlight);color:#121212;font-weight:600;transition:0.2s}
.btn:hover{box-shadow:0 0 8px var(--highlight)}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.1);color:var(--highlight)}
.card-list{display:flex;flex-direction:column;gap:8px;max-height:480px;overflow:auto}
.card-item{background:#232323;padding:10px;border-radius:8px;display:grid;grid-template-columns:120px 1fr 60px;gap:8px;align-items:center;box-shadow:0 2px 8px rgba(0,0,0,0.5)}
.gauge-wrap{padding:10px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.05);margin-bottom:12px}
.gauge{height:24px;background:rgba(255,255,255,0.05);border-radius:8px;overflow:hidden;position:relative}
.gauge-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--highlight),var(--accent));transition:width 300ms ease}
.gauge-text{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:700;color:#fff;font-size:12px}
.logs{height:200px;overflow:auto;background:rgba(0,0,0,0.25);padding:6px;border-radius:6px;font-family:monospace;font-size:12px}
.alert{display:none;padding:10px;border-radius:8px;text-align:center;font-weight:700;color:#121212;background:var(--danger);opacity:0.9;transition:0.3s}
.muted{color:#aaa}
.flex{display:flex;gap:8px;align-items:center}
.right{text-align:right}
</style>
</head>
<body>
<div class="wrap">
<h1>카오스 제로 나이트메어 - 세이브 시뮬레이터 v4</h1>
<p class="lead">일반/스페셜 카드 모두 계산 가능. 제거/복제/신번뜩임 포함. 게이밍 스타일 UI. 카드 속성별 확률 적용 가능.</p>
<div class="grid">
<div>
<!-- 카드 관리 패널 -->
<div class="panel" style="margin-bottom:12px">
<div class="flex" style="justify-content:space-between;align-items:center">
<div style="flex:1"><label>티어 (Tier)</label><input id="tier" type="number" min="1" value="1"/></div>
<div style="width:120px"><label>상한(pt)</label><input id="cap" type="text" readonly value="30"/></div>
<div style="width:120px"><label>총 pt</label><input id="totalPt" type="text" readonly value="0"/></div>
</div>
</div>
<div class="panel" style="margin-bottom:12px">
<div class="flex" style="justify-content:space-between;align-items:center;margin-bottom:8px">
<strong style="color:var(--highlight)">카드 목록</strong>
<div class="flex"><button id="addCard" class="btn">카드 추가</button><button id="addDefaultCards" class="btn ghost">기본 카드 생성</button><button id="clearCards" class="btn ghost">초기화</button></div>
</div>
<div style="margin-bottom:8px">
<label>번뜩임 확률 (%)</label><input id="sparkChance" type="number" min="0" max="100" value="20"/></div>
<div style="margin-bottom:8px">
<label>신번뜩임 확률 (%)</label><input id="newsparkChance" type="number" min="0" max="100" value="10"/></div>
<div class="card-list" id="cardList"></div>
</div>
<div class="panel">
<div class="gauge-wrap">
<div class="gauge"><div id="gaugeFill" class="gauge-fill"></div><div id="gaugeText" class="gauge-text">0 / 30 pt</div></div>
</div>
<div id="alertFull" class="alert">기억 게이지가 꽉 찼습니다!</div>
</div>
</div>
<div>
<div class="panel" style="margin-bottom:12px">
<strong style="color:var(--highlight)">실행 로그</strong>
<div id="logs" class="logs"></div>
</div>
<div class="panel">
<strong style="color:var(--accent)">요약</strong>
<div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:6px">
<div><div class="small muted">저장 상한</div><div id="summaryCap" style="font-weight:700">30 pt</div></div>
<div><div class="small muted">총 누적 pt</div><div id="summaryTotal" style="font-weight:700">0 pt</div></div>
<div><div class="small muted">금기카드 수</div><div id="summaryTaboo" style="font-weight:700">0</div></div>
<div><div class="small muted">카드 수</div><div id="summaryCount" style="font-weight:700">0</div></div>
</div>
</div>
</div>
</div>
<!-- 카드 템플릿 -->
<template id="cardTemplate">
<div class="card-item">
<div style="display:flex;flex-direction:column;gap:4px">
<select class="card-type"><option value="normal">일반 카드</option><option value="special">스페셜 카드</option><option value="taboo">금기 카드</option></select>
</div>
<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:4px;align-items:center">
<div><label class="small muted">상태</label><select class="state"><option value="normal">일반</option><option value="spark">번뜩임</option><option value="newspark">신 번뜩임</option></select></div>
<div><label class="small muted">제거</label><input class="num-input remove-count" type="number" min="0" value="0"/></div>
<div><label class="small muted">복제</label><input class="num-input dup-count" type="number" min="0" value="0"/></div>
<div><label class="small muted">변환</label><input class="num-input trans-count" type="number" min="0" value="0"/></div>
<div><label class="small muted">고유</label><input type="checkbox" class="is-unique"/></div>
<div><label class="small muted">시작 제거</label><input type="checkbox" class="is-startremove"/></div>
</div>
<div style="display:flex;flex-direction:column;align-items:flex-end"><div class="small muted right">기여: <span class="contrib">0</span> pt</div><div style="display:flex;gap:4px;margin-top:4px"><button class="btn ghost remove-btn">제거</button></div></div>
</div>
</template>
<script src="chaos_simulator_v4.js"></script>
</body>
</html>
