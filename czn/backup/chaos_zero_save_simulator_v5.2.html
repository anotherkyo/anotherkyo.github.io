<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>카오스 제로 나이트메이터 시뮬레이터 v5.2</title>
<link rel="stylesheet" href="chaos_simulator_v5_1.css">
<style>
:root{--bg:#0f1113;--panel:#15171a;--text:#e9f0f5;--muted:#9fb0bf;--accent:#5bd3f0;--accent2:#a777ff;--danger:#ff6b6b}
body{margin:0;background:var(--bg);font-family:Inter,system-ui,'Noto Sans KR',sans-serif;color:var(--text)}
.container{max-width:1200px;margin:20px auto;padding:18px}
.header{display:flex;justify-content:space-between;align-items:center}
h1{margin:0;color:var(--accent)}
.controls{display:flex;gap:8px;align-items:end}
.panel{background:var(--panel);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.03)}
.grid{display:grid;grid-template-columns:2fr 1fr;gap:14px;margin-top:12px}
.card-list{display:flex;flex-direction:column;gap:8px;max-height:420px;overflow:auto;padding:6px}
.card-item{display:grid;grid-template-columns:130px 1fr 90px;gap:8px;align-items:center;padding:8px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px solid rgba(255,255,255,0.02)}
.small{font-size:12px;color:var(--muted)}
.btn{background:linear-gradient(90deg,var(--accent),var(--accent2));border:none;color:#071018;padding:8px 5px;border-radius:8px;cursor:pointer;font-weight:700}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--accent)}
.gauge{height:28px;background:rgba(255,255,255,0.03);border-radius:10px;overflow:hidden;position:relative;margin-top:10px}
.gauge-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent2));transition:width 300ms}
.gauge-text{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:800;color:#021018}
.logs{height:220px;overflow:auto;background:rgba(0,0,0,0.25);padding:8px;border-radius:8px;font-family:monospace;color:var(--text)}
.alert{display:none;padding:10px;border-radius:8px;text-align:center;font-weight:800;color:#071018;background:var(--danger);margin-top:8px}
.modal{position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center}
.modal .box{background:var(--panel);padding:16px;border-radius:10px;width:360px}
label{display:block;margin-bottom:6px;color:var(--muted);font-size:13px}
input[type=checkbox]{transform:scale(1.1);margin-right:6px}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <div>
      <h1>카오스 제로 나이트메이터 시뮬레이터 v5.2</h1>
      <div class="small">고유카드 8장 포함 · 중립/몬스터/금기 · 복제/변환 자동 카운트</div>
    </div>
    <div class="controls">
      <div>
        <label class="small">티어</label>
        <input id="tier" type="number" min="1" value="1" style="width:90px;padding:6px;border-radius:6px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)">
      </div>      
      <button id="openAddModal" class="btn">카드 추가</button>
      <button id="resetAll" class="btn">초기화</button>
    </div>
  </div>

  <div class="grid">
    <div>
      <div class="panel">
        <div class="small" style="font-weight:700;margin-bottom:8px">카드 목록</div>
        <div class="card-list" id="cardList"></div>
        <div class="small" style="margin-top:8px;color:var(--muted)">추가된 카드는 고유 여부/시작 제거 체크가 없습니다. 복제/변환 체크만 가능합니다.</div>
      </div>

      <div class="panel" style="margin-top:12px">
        <div class="small" style="font-weight:700;margin-bottom:8px">고유 카드 (초기 8장)</div>
        <div id="uniqueWrap"></div>
        <div class="small" style="margin-top:8px;color:var(--muted)">고유일반1~3: 번뜩임 불가 / 고유레어,전설,신화: 번뜩임 가능. 제거시 +20pt. 제거 클릭은 횟수 카운트로 반영됩니다.</div>
      </div>
    </div>

    <div>
      <div class="panel">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div class="small">저장 상한</div>
            <div id="capDisplay" style="font-weight:800">30 pt</div>
          </div>
          <div>
            <div class="small">총 누적 pt</div>
            <div id="totalDisplay" style="font-weight:800">0 pt</div>
          </div>
        </div>
        <div class="gauge"><div id="gaugeFill" class="gauge-fill"></div><div id="gaugeText" class="gauge-text">0 / 30 pt</div></div>
        <div id="alertFull" class="alert">기억 게이지가 꽉 찼습니다!</div>
      </div>

      <div class="panel" style="margin-top:12px">
        <div class="small" style="font-weight:700;margin-bottom:8px">로그</div>
        <div id="logs" class="logs"></div>
      </div>
    </div>
  </div>
</div>

<!-- Add Card Modal -->
<div id="modal" class="modal"><div class="box">
  <div style="font-weight:800;margin-bottom:8px">카드 추가</div>
  <label>카드 종류</label>
  <select id="newType" style="width:100%;padding:8px;margin-bottom:8px;border-radius:6px;background-color:#2a2a2a;color:var(--text)">
    <option value="neutral">중립 카드</option>
    <option value="monster">몬스터 카드</option>
    <option value="taboo">금기 카드</option>
    <option value="unique">고유 카드(복제)</option>
  </select>
  <label>상태</label>
  <select id="newState" style="width:100%;padding:8px;margin-bottom:8px;border-radius:6px;background-color:#2a2a2a;color:var(--text)">
    <option value="normal">일반</option>
    <option value="spark">번뜩임</option>
    <option value="newspark">신 번뜩임</option>
  </select>
  <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:8px">
    <button id="addCardConfirm" class="btn">추가</button>
    <button id="addCardCancel" class="btn ghost">취소</button>
  </div>
</div></div>

<template id="cardTemplate">
  <div class="card-item">
    <div>
      <select class="card-type">
		<option value="neutral">중립 카드</option>
		<option value="monster">몬스터 카드</option>
		<option value="taboo">금기 카드</option>
		<option value="unique">고유 카드(복제)</option>
      </select>
      <div class="small">중립/금기20 몬스터80</div>
    </div>
    <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px;align-items:center">
      <div>
        <label class="small">상태</label>
        <select class="state"><option value="normal">일반</option><option value="spark">번뜩임</option><option value="newspark">신 번뜩임</option></select>
      </div>
      <div>
        <label class="small">복제 여부</label>
        <input type="checkbox" class="is-dup" />
      </div>
      <div>
        <label class="small">변환 여부</label>
        <input type="checkbox" class="is-trans" />
      </div>
    </div>
    <div style="text-align:right">
      <div class="small">기여</div>
      <div style="font-weight:800"><span class="contrib">0</span> pt</div>
      <div style="margin-top:8px"><button class="btn ghost remove-row">삭제</button></div>
    </div>
  </div>
</template>

<script src="chaos_simulator_v5.2.js"></script>
</body>
</html>